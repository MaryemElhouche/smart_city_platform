<div class="table-wrapper">
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th *ngFor="let col of columns" 
                  [class.sortable]="col.sortable"
                  (click)="col.sortable && onSort(col.key)">
                {{ col.label }}
                <span class="material-icons sort-icon" *ngIf="col.sortable">
                  {{ sortKey === col.key ? (sortDesc ? 'arrow_downward' : 'arrow_upward') : 'unfold_more' }}
                </span>
              </th>
              <th *ngIf="actions" class="actions-header">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of sortedData()" 
                (click)="onRowClick(row)" 
                [class.clickable]="clickable">
              <td *ngFor="let col of columns">
                <ng-container [ngSwitch]="col.type">
                  <span *ngSwitchCase="'badge'" 
                        [class]="'badge badge-' + getBadgeClass(row[col.key])">
                    {{ formatBadgeValue(row[col.key]) }}
                  </span>
                  <span *ngSwitchCase="'date'">
                    {{ formatDate(row[col.key]) }}
                  </span>
                  <span *ngSwitchCase="'number'">
                    {{ formatNumber(row[col.key]) }}
                  </span>
                  <span *ngSwitchCase="'boolean'">
                    <span class="material-icons" 
                          [style.color]="row[col.key] ? 'var(--success-green)' : 'var(--text-light)'">
                      {{ row[col.key] ? 'check_circle' : 'cancel' }}
                    </span>
                  </span>
                  <span *ngSwitchDefault>
                    {{ row[col.key] }}
                  </span>
                </ng-container>
              </td>
              <td *ngIf="actions" class="actions-cell">
                <ng-content select="[actions]"></ng-content>
              </td>
            </tr>
            
            <tr *ngIf="data.length === 0 && !loading">
              <td [attr.colspan]="columns.length + (actions ? 1 : 0)" class="no-data">
                <span class="material-icons">inbox</span>
                <p>{{ emptyMessage }}</p>
              </td>
            </tr>
            
            <tr *ngIf="loading">
              <td [attr.colspan]="columns.length + (actions ? 1 : 0)" class="loading-cell">
                <div class="table-loader">
                  <div class="spinner"></div>
                  <span>Loading data...</span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="table-footer" *ngIf="showFooter && data.length > 0">
        <div class="table-info">
          Showing {{ data.length }} {{ data.length === 1 ? 'item' : 'items' }}
        </div>
      </div>
    </div>